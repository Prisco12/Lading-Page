<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https: //fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js" integrity="sha512-01CJ9/g7e8cUmY0DFTMcUw/ikS799FHiOA0eyHsUWfOetgbx/t6oV4otQ5zXKQyIrQGTHSmRVPIgrgLcZi/WMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <title>Poltrona Page</title>
  <script>
    function trocarImagem(src, caminho) {
      document.getElementById(src).src = caminho;
    }
  </script>
</head>

<body>
  <div id="container">
    <div id="chair-side"  class="divParaConverter">
      <div class="imagens">
        <img class="chair-image" id="peca1" src="img/poltrona Marly_trnas.png" alt="Poltrona chair" />
        <img class="chair-image" id="peca2" src="img/poltrona Marly_trnas2.png" alt="Poltrona chair" />
        <img class="chair-image" id="peca3" src="img/poltrona Marly_trnas3.png" alt="Poltrona chair" />
        <img class="chair-image" id="peca4" src="img/poltrona Marly_trnas4.png" alt="Poltrona chair" />
        <img class="chair-image" id="peca5" src="img/poltrona Marly_trnas5.png" alt="Poltrona chair" />
        <img class="chair-image" id="peca6" src="img/poltrona Marly_trnas6.png" alt="Poltrona chair" />
        <img class="chair-image" id="logo" src="img/logo.png" alt="Poltrona chair" />
        <img class="chair-image" id="almofada" src="img/almofada.png" alt="Poltrona chair" />
      </div>
    </div>
    <div id="menu-side">

      <div class="titulo-sub">
        <h1 class="titulo">Poltrona</h1>
        <p class="sub">Personalize sua poltrona</p>
      </div>

      <div class="color-options">
        <h1 class="titulo-option">Cor da base</h1>
        <div class="cores">
          <div style="background-color: rgb(150, 150, 150);" onclick="trocarImagem('peca1','img/base-cinza.png')"
            class="color-option"></div>
          <div style="background-color: rgb(0, 0, 0);" onclick="trocarImagem('peca1','img/base-preta.png')"
            class="color-option"></div>
          <div style="background-color: #9e0909;" onclick="trocarImagem('peca1','img/base-vermelha.png')"
            class="color-option"></div>
          <div style="background-color: #c19b25;" onclick="trocarImagem('peca1','img/base-amarela.png')"
            class="color-option"></div>
        </div>

      </div>

      <div class="color-options">
        <h1 class="titulo-option">Cor da Parte Inferior</h1>
        <div class="cores">
          <img src="./img/0040/0040.png" alt="" onclick="trocarImagem('peca2','img/0040/peca2.png')"
            class="color-option">
          <img src="./img/0131/0131.png" alt="" onclick="trocarImagem('peca2','img/0131/peca2.png')"
            class="color-option">
          <img src="./img/0636/0636.png" alt="" onclick="trocarImagem('peca2','img/0636/peca2.png')"
            class="color-option">
          <img src="./img/0668/0668.png" alt="" onclick="trocarImagem('peca2','img/0668/peca2.png')"
            class="color-option">
          <img src="./img/0730/0730.png" alt="" onclick="trocarImagem('peca2','img/0730/peca2.png')"
            class="color-option">
          <img src="./img/0757/0757.png" alt="" onclick="trocarImagem('peca2','img/0757/peca2.png')"
            class="color-option">
          <img src="./img/0858/0858.png" alt="" onclick="trocarImagem('peca2','img/0858/peca2.png')"
            class="color-option">
          <img src="./img/0885/0885.png" alt="" onclick="trocarImagem('peca2','img/0885/peca2.png')"
            class="color-option">
          <img src="./img/0889/0889.png" alt="" onclick="trocarImagem('peca2','img/0889/peca2.png')"
            class="color-option">
          <img src="./img/6137/6137.png" alt="" onclick="trocarImagem('peca2','img/6137/peca2.png')"
            class="color-option">
          <img src="./img/8088/8088.png" alt="" onclick="trocarImagem('peca2','img/8088/peca2.png')"
            class="color-option">
        </div>

      </div>

      <div class="color-options">
        <h1 class="titulo-option">Cor do Meio (Assento)</h1>
        <div class="cores">
          <img src="./img/0040/0040.png" alt="" onclick="trocarImagem('peca3','img/0040/peca3.png')"
            class="color-option">
          <img src="./img/0131/0131.png" alt="" onclick="trocarImagem('peca3','img/0131/peca3.png')"
            class="color-option">
          <img src="./img/0636/0636.png" alt="" onclick="trocarImagem('peca3','img/0636/peca3.png')"
            class="color-option">
          <img src="./img/0668/0668.png" alt="" onclick="trocarImagem('peca3','img/0668/peca3.png')"
            class="color-option">
          <img src="./img/0730/0730.png" alt="" onclick="trocarImagem('peca3','img/0730/peca3.png')"
            class="color-option">
          <img src="./img/0757/0757.png" alt="" onclick="trocarImagem('peca3','img/0757/peca3.png')"
            class="color-option">
          <img src="./img/0858/0858.png" alt="" onclick="trocarImagem('peca3','img/0858/peca3.png')"
            class="color-option">
          <img src="./img/0885/0885.png" alt="" onclick="trocarImagem('peca3','img/0885/peca3.png')"
            class="color-option">
          <img src="./img/0889/0889.png" alt="" onclick="trocarImagem('peca3','img/0889/peca3.png')"
            class="color-option">
          <img src="./img/6137/6137.png" alt="" onclick="trocarImagem('peca3','img/6137/peca3.png')"
            class="color-option">
          <img src="./img/8088/8088.png" alt="" onclick="trocarImagem('peca3','img/8088/peca3.png')"
            class="color-option">
        </div>


      </div>
      <div class="color-options">
        <h1 class="titulo-option">Cor do Meio (Encosto)</h1>
        <div class="cores">
          <img src="./img/0040/0040.png" alt="" onclick="trocarImagem('peca4','img/0040/peca4.png')"
            class="color-option">
          <img src="./img/0131/0131.png" alt="" onclick="trocarImagem('peca4','img/0131/peca4.png')"
            class="color-option">
          <img src="./img/0636/0636.png" alt="" onclick="trocarImagem('peca4','img/0636/peca4.png')"
            class="color-option">
          <img src="./img/0668/0668.png" alt="" onclick="trocarImagem('peca4','img/0668/peca4.png')"
            class="color-option">
          <img src="./img/0730/0730.png" alt="" onclick="trocarImagem('peca4','img/0730/peca4.png')"
            class="color-option">
          <img src="./img/0757/0757.png" alt="" onclick="trocarImagem('peca4','img/0757/peca4.png')"
            class="color-option">
          <img src="./img/0858/0858.png" alt="" onclick="trocarImagem('peca4','img/0858/peca4.png')"
            class="color-option">
          <img src="./img/0885/0885.png" alt="" onclick="trocarImagem('peca4','img/0885/peca4.png')"
            class="color-option">
          <img src="./img/0889/0889.png" alt="" onclick="trocarImagem('peca4','img/0889/peca4.png')"
            class="color-option">
          <img src="./img/6137/6137.png" alt="" onclick="trocarImagem('peca4','img/6137/peca4.png')"
            class="color-option">
          <img src="./img/8088/8088.png" alt="" onclick="trocarImagem('peca4','img/8088/peca4.png')"
            class="color-option">
        </div>

      </div>

      <div class="color-options">
        <h1 class="titulo-option">Cor do Encosto</h1>
        <div class="cores">
          <img src="./img/0040/0040.png" alt="" onclick="trocarImagem('peca6','img/0040/peca6.png')"
            class="color-option">
          <img src="./img/0131/0131.png" alt="" onclick="trocarImagem('peca6','img/0131/peca6.png')"
            class="color-option">
          <img src="./img/0636/0636.png" alt="" onclick="trocarImagem('peca6','img/0636/peca6.png')"
            class="color-option">
          <img src="./img/0668/0668.png" alt="" onclick="trocarImagem('peca6','img/0668/peca6.png')"
            class="color-option">
          <img src="./img/0730/0730.png" alt="" onclick="trocarImagem('peca6','img/0730/peca6.png')"
            class="color-option">
          <img src="./img/0757/0757.png" alt="" onclick="trocarImagem('peca6','img/0757/peca6.png')"
            class="color-option">
          <img src="./img/0858/0858.png" alt="" onclick="trocarImagem('peca6','img/0858/peca6.png')"
            class="color-option">
          <img src="./img/0885/0885.png" alt="" onclick="trocarImagem('peca6','img/0885/peca6.png')"
            class="color-option">
          <img src="./img/0889/0889.png" alt="" onclick="trocarImagem('peca6','img/0889/peca6.png')"
            class="color-option">
          <img src="./img/6137/6137.png" alt="" onclick="trocarImagem('peca6','img/6137/peca6.png')"
            class="color-option">
          <img src="./img/8088/8088.png" alt="" onclick="trocarImagem('peca6','img/8088/peca6.png')"
            class="color-option">
        </div>
      </div>

      <div class="color-options">
        <h1 class="titulo-option">Cor da Junção</h1>
        <div class="cores">
          <img src="./img/0040/0040.png" alt="" onclick="trocarImagem('peca5','img/0040/peca5.png')"
            class="color-option">
          <img src="./img/0131/0131.png" alt="" onclick="trocarImagem('peca5','img/0131/peca5.png')"
            class="color-option">
          <img src="./img/0636/0636.png" alt="" onclick="trocarImagem('peca5','img/0636/peca5.png')"
            class="color-option">
          <img src="./img/0668/0668.png" alt="" onclick="trocarImagem('peca5','img/0668/peca5.png')"
            class="color-option">
          <img src="./img/0730/0730.png" alt="" onclick="trocarImagem('peca5','img/0730/peca5.png')"
            class="color-option">
          <img src="./img/0757/0757.png" alt="" onclick="trocarImagem('peca5','img/0757/peca5.png')"
            class="color-option">
          <img src="./img/0858/0858.png" alt="" onclick="trocarImagem('peca5','img/0858/peca5.png')"
            class="color-option">
          <img src="./img/0885/0885.png" alt="" onclick="trocarImagem('peca5','img/0885/peca5.png')"
            class="color-option">
          <img src="./img/0889/0889.png" alt="" onclick="trocarImagem('peca5','img/0889/peca5.png')"
            class="color-option">
          <img src="./img/6137/6137.png" alt="" onclick="trocarImagem('peca5','img/6137/peca5.png')"
            class="color-option">
          <img src="./img/8088/8088.png" alt="" onclick="trocarImagem('peca5','img/8088/peca5.png')"
            class="color-option">
        </div>

            <!-- Conteúdo da div aqui -->
            <button onclick="converterDivEmImagem()">Converter em Imagem e Salvar</button>
            <script>
              function converterDivEmImagem() {
                  // Seleciona a div que será convertida em imagem
                  var divParaConverter = document.querySelector('.divParaConverter');
          
                  // Usa a biblioteca html2canvas para converter a div em uma imagem
                  html2canvas(divParaConverter, {
                      onrendered: function(canvas) {
                          // Obtém os dados da imagem como um URL base64
                          var imagemBase64 = canvas.toDataURL('image/png');
          
                          // Envia a imagem para o servidor
                          enviarImagemParaServidor(imagemBase64);
                      }
                  });
              }
          
              function enviarImagemParaServidor(imagemBase64) {
                  // Cria um objeto XMLHttpRequest para fazer a solicitação POST
                  var xhr = new XMLHttpRequest();
                  xhr.open('POST', 'http://localhost:3000/salvar-imagem'); // Substitua 'http://localhost:3000/salvar-imagem' pela URL correta do seu servidor
                  xhr.setRequestHeader('Content-Type', 'application/json');
          
                  // Define a função de retorno de chamada para a solicitação
                  xhr.onload = function() {
                      if (xhr.status === 200) {
                          var urlImagem = JSON.parse(xhr.responseText).url;
                          compartilharNoWhatsApp(urlImagem);
                          console.log('Imagem salva com sucesso!');
                      } else {
                          console.log('Erro ao salvar imagem.');
                      }
                  };
          
                  // Envia os dados da imagem como JSON no corpo da solicitação
                  xhr.send(JSON.stringify({ imagem: imagemBase64 }));
              }

              function compartilharNoWhatsApp(urlImagem) {
        // Construa o link com a URL da imagem
        var linkWhatsApp = 'https://wa.me/+5544998053098?text=' + encodeURIComponent(urlImagem);

        // Abra o link no WhatsApp
        window.open(linkWhatsApp);
    }
          </script>

      </div>
    </div>
  </div>
</body>

</html>